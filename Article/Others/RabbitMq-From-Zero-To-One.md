# RabbitMq 从0到1

## 消息队列

消息队列中间件 (Message Queue Middleware，简称 MQ) 是指利用高效可靠的消息传递机制进行服务之间的信息通信。它主要适用于以下场景：

- **项目解偶**：不同项目和模块之间可用通过MQ进行通行，消息的消费者无需关心消息从哪里来，生产者也无需关心哪些服务会进行消费。
- **流量削峰**：可以将突发的流量 (如秒杀数据) 写入消息中间件，然后由多个消费者根据自身情况进行消费
- **异步处理**：对于一些不需要立即处理或者不关心数据处理结果的场景，可以使用中间件进行异步处理
- **发布订阅**：一个消息可能存在多个消费者的情况

任何技术都存在双面性，在享受便利的同时，也要直面问题：

- **增加系统复杂度**：如何保证MQ的高可用
- **数据一致性(事务处理)**：

> [MQ消息最终一致性解决方案](https://juejin.cn/post/6844903951448408071)

- 重复消费
- 顺序消费

## 选型



| 特性       | ActiveMQ                   | RabbitMq                   | RocketMQ                    | Kafka                                                        |
| ---------- | -------------------------- | -------------------------- | --------------------------- | ------------------------------------------------------------ |
| 开发语言   | java                       | erlang                     | java                        | java                                                         |
| 单机吞吐量 | 万级                       | 万级                       | 10万级                      | 10万级别，kafka最大优点就是吞吐量大，一般配合大数据类的系统来进行实时数据计算、日志采集等场景。 |
| 时效性     | ms级                       | 微秒级                     | ms级                        | ms级                                                         |
| 可用性     | 高，基于主从架构实现可用性 | 高，基于主从架构实现可用性 | 非常高，分布式架构          | 非常高，kafka是分布式的，一个数据多个副本，少数机器宕机，不会丢失数据，不会导致不可用 |
| 消息可靠性 | 有较低概率丢失             | 基本不丢                   | 经过参数优化，可以确保0丢失 | 同RabbitMQ                                                   |
| 社区活跃度 | 低                         | 中                         | 高                          | 高                                                           |



## 参考

1. [Turorial](https://www.rabbitmq.com/tutorials/tutorial-one-java.html)
2. [Queues](https://www.rabbitmq.com/queues.html)
3. [RabbitMQ 核心概念详解](https://juejin.cn/post/6844904039193280526)

